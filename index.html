<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>St. Peter's Boarding Community</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;700&family=Averia+Serif+Libre&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Averia Serif Libre', serif; /* Default body font */
            color: #0D0A0A; /* Warm Black */
            background-color: #EDE8E3; /* White Stone */
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Instrument Sans', sans-serif;
            text-transform: uppercase;
        }
        .header-bg {
            background-color: #001733; /* Midnight Blue */
        }
        .footer-bg {
            background-color: #001733; /* Midnight Blue */
        }
        .tile-bg-1 {
            background-color: #CF082B; /* Scarlet */
        }
        .tile-bg-2 {
            background-color: #82ADBF; /* Saxe Blue */
        }
        .tile-bg-3 {
            background-color: #001733; /* Midnight Blue */
        }
        .tile-bg-4 { /* New tile background color */
            background-color: #CF082B; /* Scarlet, or pick another brand color */
        }
        .text-scarlet {
            color: #CF082B;
        }
        .text-white-stone {
            color: #EDE8E3;
        }
        .text-warm-black {
            color: #0D0A0A;
        }
        .text-saxe-blue {
            color: #82ADBF;
        }
        .text-midnight-blue {
            color: #001733;
        }
        .border-scarlet {
            border-color: #CF082B;
        }
        .hover-scale:hover {
            transform: scale(1.03);
        }
        /* SOP List Item Styling */
        .sop-item {
            border: 1px solid #D1D5DB; /* Light gray border */
            border-radius: 0.5rem;
            overflow: hidden; /* Ensures rounded corners apply to content */
            margin-bottom: 1rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .sop-header {
            padding: 1rem;
            background-color: #EDE8E3; /* White Stone */
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s ease-in-out;
        }
        .sop-header:hover {
            background-color: #E0DCD7; /* Slightly darker white stone on hover */
        }
        .sop-header h3 {
            color: #001733; /* Midnight Blue */
            font-size: 1.125rem;
            font-family: 'Instrument Sans', sans-serif;
            margin: 0;
        }
        .sop-header .toggle-icon {
            font-size: 1.5rem;
            line-height: 1;
            transition: transform 0.2s ease-in-out;
        }
        .sop-header.active .toggle-icon {
            transform: rotate(180deg);
        }
        .sop-content {
            padding: 1rem;
            background-color: #F9FAFB; /* Lighter background for content */
            border-top: 1px solid #E5E7EB; /* Separator line */
        }
        .sop-content.hidden {
            display: none;
        }
        .sop-detail-section h4 {
            color: #CF082B; /* Scarlet */
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            font-size: 1.25rem;
            font-family: 'Instrument Sans', sans-serif;
        }
        .sop-detail-section h5 {
            color: #001733; /* Midnight Blue */
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
            font-family: 'Instrument Sans', sans-serif;
        }
        .sop-detail-section p, .sop-detail-section ul {
            margin-bottom: 1rem;
            line-height: 1.6;
            font-size: 0.95rem;
        }
        .sop-detail-section ul {
            list-style-type: disc;
            margin-left: 1.5rem;
        }

        /* Styles for the Suicide Protocol Page when loaded dynamically */
        /* These styles will apply to the content loaded from suicide-protocol.html */
        .suicide-protocol-container {
            font-family: 'Averia Serif Libre', serif; /* Default body font */
            background-color: #EDE8E3; /* Stone White from Brand Guidelines */
            color: #0D0A0A; /* Warm Black from Brand Guidelines */
        }
        .suicide-protocol-container .poster-container {
            background-color: #ffffff; /* White background for content area */
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 900px;
            width: 100%;
            text-align: center;
            border: 4px solid #CF082B; /* Scarlet from Brand Guidelines */
            overflow: hidden; /* Ensure rounded corners clip content */
            margin: 0 auto; /* Center the container */
        }
        .suicide-protocol-container .school-logo {
            margin-bottom: 20px;
        }
        .suicide-protocol-container .school-logo img {
            max-width: 150px; /* Adjust size as needed */
            height: auto;
            margin: 0 auto; /* Center the image */
        }
        .suicide-protocol-container h1 {
            font-family: 'Instrument Sans', sans-serif; /* Main heading font */
            font-weight: 700; /* Bold for main headings */
            text-transform: uppercase; /* All caps as per guidelines */
            color: #0D0A0A; /* Warm Black */
        }
        .suicide-protocol-container h2 {
            font-family: 'Instrument Sans', sans-serif; /* Subheading font */
            font-weight: 600; /* Semi-Bold for subheadings */
            color: #0D0A0A; /* Warm Black */
        }
        .suicide-protocol-container .section-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            color: #0D0A0A; /* Warm Black for headings */
        }
        .suicide-protocol-container .section-header svg {
            width: 40px;
            height: 40px;
            fill: #CF082B; /* Scarlet for icons */
        }
        .suicide-protocol-container .list-item {
            display: flex;
            align-items: flex-start;
            text-align: left;
            margin-bottom: 15px;
        }
        .suicide-protocol-container .list-item svg {
            flex-shrink: 0;
            width: 24px;
            height: 24px;
            margin-right: 10px;
            margin-top: 4px; /* Align icon with text */
            fill: #CF082B; /* Scarlet for checkmarks */
        }
        .suicide-protocol-container .key-contacts {
            background-color: rgba(207, 8, 43, 0.1); /* Light Scarlet tint */
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
            border: 2px dashed #CF082B; /* Scarlet dashed border */
        }
        .suicide-protocol-container .key-contacts h3 {
            color: #0D0A0A; /* Warm Black */
            margin-bottom: 15px;
        }
        .suicide-protocol-container .key-contacts p {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #0D0A0A; /* Warm Black */
        }
        .suicide-protocol-container .disclaimer {
            margin-top: 30px;
            font-size: 0.9rem;
            color: #0D0A0A; /* Warm Black */
            border-top: 1px solid #e2e8f0;
            padding-top: 20px;
        }
        /* Styles for the After-Hours Contacts Page when loaded dynamically */
        .after-hours-contacts-container {
            font-family: 'Averia Serif Libre', serif; /* Default body font */
            background-color: #ffffff; /* White background for content area */
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 900px;
            width: 100%;
            text-align: center;
            border: 4px solid #82ADBF; /* Saxe Blue from Brand Guidelines */
            overflow: hidden; /* Ensure rounded corners clip content */
            margin: 0 auto; /* Center the container */
        }
        .after-hours-contacts-container h2 {
            font-family: 'Instrument Sans', sans-serif;
            font-weight: 700;
            color: #001733;
        }
        .after-hours-contacts-container p {
            color: #0D0A0A;
        }
        .after-hours-contacts-container .bg-white {
            background-color: #EDE8E3; /* White Stone for inner box */
            border: 2px dashed #CF082B; /* Scarlet dashed border */
        }
        .after-hours-contacts-container .text-scarlet {
            color: #CF082B;
        }
        .after-hours-contacts-container .text-saxe-blue {
            color: #82ADBF;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="header-bg text-white-stone p-4 shadow-lg">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center">
            <div class="flex items-center mb-2 md:mb-0">
                <!-- St. Peter's Crest -->
                <!-- Replace "path/to/your/crest.png" with the actual path to your image in your GitHub repository. -->
                <!-- For example, if your image is in a folder named 'images' in the root, it might be 'images/crest.png' -->
                <img src="https://github.com/gregjhaines/boarding-hub/blob/main/StPeters_Crest_Large_Full_Colour_Saxe.png?raw=true" alt="St. Peter's School Crest" class="w-12 h-12 mr-3 object-contain">
                <h1 class="text-2xl md:text-3xl font-bold">St. Peter's Boarding Community</h1>
            </div>
            <nav>
                <ul class="flex space-x-4">
                    <li><a href="#home" class="hover:text-scarlet transition duration-300">Home</a></li>
                    <li><a href="#sops" class="hover:text-scarlet transition duration-300">SOPs</a></li>
                    <li><a href="#forms" class="hover:text-scarlet transition duration-300">Forms</a></li>
                    <li><a href="after-hours-contacts.html" class="hover:text-scarlet transition duration-300">Contact</a></li>
                    <li><a href="suicide-protocol.html" class="hover:text-scarlet transition duration-300">Suicide Protocol</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content Area -->
    <main id="app-content" class="flex-grow container mx-auto p-4 md:p-8">
        <!-- Content will be loaded here by JavaScript -->
    </main>

    <!-- Footer -->
    <footer class="footer-bg text-white-stone p-4 text-center shadow-inner mt-8">
        <p>&copy; 2025 St. Peter's Boarding Community. All rights reserved.</p>
        <p class="text-sm mt-2">Cambridge, N.Z.</p>
    </footer>

    <script>
        // Define SOP data from the uploaded document
        const sopsData = {
            "I. Digital Device Management": {
                "SOP 1.1: Digital Device Hand in": {
                    purpose: "To ensure consistent enforcement of digital device curfews to promote healthy sleep habits, reduce distractions during study, and foster in-person social interaction.",
                    scope: "All boarding students and duty staff in all boarding houses.",
                    roles: {
                        "House Directors": "Oversee enforcement, communicate rules, and manage consequences.",
                        "Duty Staff": "Directly responsible for enforcing the curfew, collecting devices (if applicable), and monitoring compliance.",
                        "Students": "Responsible for adhering to the curfew and submitting devices as required."
                    },
                    procedures: [
                        { heading: "Hand in Communication", details: "At the start of each term, House Directors clearly communicate digital device hand in times and procedures to all students (e.g., via house meeting, notice board, and Cube Contract). Specific times for different year levels - Year 8 and 9: 8:00 PM, Year 10: 8:45 PM, Year 11: 9.00 PM." },
                        { heading: "Device Collection/Monitoring", details: "At the designated curfew time, students place all personal digital devices (phones, tablets, gaming devices) in a designated, secure collection point in their house (e.g., locked cabinet in common room or House Office). Duty Staff supervise the collection process, ensuring all students comply. Devices are returned at a specified time the following morning (e.g., 7:00 AM)." },
                        { heading: "Monitoring During Study Periods (Prep)", details: "During designated prep times, recreational digital device use is strictly prohibited. Duty Staff actively supervise prep areas, ensuring students are using devices only for academic purposes." },
                        { heading: "Consequences for Non-Compliance", details: "First Offence: Device confiscated for 24 hours, warning issued, recorded in REACH Duty Report/Pastoral Note. Second Offence: Device confiscated for 3 days, parent/caregiver informed, recorded in REACH. Third Offence: Device confiscated for 1 week, meeting with House Director and student, parent/caregiver informed, recorded in REACH, potential further disciplinary action as per Disciplinary Consequences Policy. Repeated non-compliance may lead to permanent device restrictions or other disciplinary measures." },
                        { heading: "Reporting", details: "All instances of non-compliance and subsequent actions are logged in the Duty Report/Pastoral Note on REACH." },
                        { heading: "Communication Protocols", details: "Clear communication to students and parents about the curfew rules and consequences. Parents informed promptly of repeated non-compliance." }
                    ]
                },
                "SOP 1.2: Digital Citizenship Education & Responsible Use": {
                    purpose: "To educate students on responsible digital citizenship, promoting safe, ethical, and healthy use of technology.",
                    scope: "All boarding students, House Directors, and relevant school staff (e.g., IT, Counsellor).",
                    roles: {
                        "Director of Boarding": "Oversees the integration of digital citizenship into boarding life.",
                        "House Directors": "Facilitate discussions, reinforce principles, and address digital well-being concerns.",
                        "IT Department": "Provides expertise on online safety and security.",
                        "Counsellor": "Addresses mental health aspects of digital use (e.g., screen time, social media pressure)."
                    },
                    procedures: [
                        { heading: "Induction Program Integration", details: "During new student induction, dedicate a session to digital citizenship, covering: Online safety and privacy. Cyberbullying prevention and reporting (referencing Anti-Bullying Policy). Responsible social media use. Impact of screen time on sleep and academic performance. School's Digital Devices Policy and Expectations." },
                        { heading: "Regular House Discussions/Workshops", details: "House Directors facilitate regular (e.g., termly) discussions or short workshops on digital citizenship topics. Utilise resources from reputable organisations (e.g., Netsafe NZ, Common Sense Media). Encourage students to share experiences and best practices." },
                        { heading: "Addressing Misuse & Online Safety Incidents", details: "When digital device misuse occurs (e.g., inappropriate content, cyberbullying), use it as a teachable moment. Follow the Behaviour Management and Disciplinary Consequences Policies, but also engage in restorative conversations to educate on impact. For explicit material posted online: If a student expresses concern about explicit material posted about them online, staff should: Provide immediate support and reassurance. Advise the student not to engage with the content or the person who posted it. Inform the House Director and the Director of Boarding immediately. Guide the student (or act on their behalf, with consent) to utilise resources like TakeItDown.nz (or other relevant official platforms like Netsafe NZ), which can assist in removing non-consensual intimate images or videos. Ensure the student has access to counselling support." },
                        { heading: "Promoting Digital Well-being", details: "Encourage 'digital detox' periods (e.g., during weekend activities, specific evenings). Promote alternative activities that do not involve screens. Educate students on managing notifications and setting personal boundaries for device use." },
                        { heading: "Parental Communication", details: "Share resources and information with parents on supporting healthy digital habits at home. Collaborate with parents when significant digital misuse issues or online safety incidents arise." },
                        { heading: "Communication Protocols", details: "Digital citizenship guidelines prominently displayed in houses. Discussions and workshops are announced in advance. Parents informed of educational initiatives and any serious incidents, especially those involving online safety." },
                        { heading: "Required Documentation/Record Keeping", details: "Records of digital citizenship sessions delivered. Incident reports for digital misuse or online safety incidents (as per Behaviour Incident Reporting SOP)." },
                        { heading: "Review Cycle", details: "Annually, or more frequently as new digital trends and challenges emerge." },
                        { heading: "Relevant Policy Cross-Reference", details: "Digital Devices Policy, Anti-Bullying, Harassment and Discrimination Policy, Behaviour Management Policy, Child and Young Person Protection Policy." }
                    ]
                }
            },
            "II. Emergency & Crisis Management": {
                "SOP 2.1: Emergency Evacuation Protocol": {
                    purpose: "To ensure the safe and orderly evacuation of all students and staff from boarding houses in the event of an emergency (e.g., fire, earthquake, gas leak).",
                    scope: "All boarding staff, students, and visitors within boarding houses.",
                    roles: {
                        "House Director (or Senior Duty Staff)": "Overall command, initiates evacuation, ensures all areas are checked, accounts for all individuals.",
                        "Duty Staff": "Direct students, conduct sweep of assigned areas, assist vulnerable individuals, report to command.",
                        "Students": "Follow instructions, proceed to assembly point, remain calm.",
                        "Fire Wardens (Designated Staff)": "Assist with safe exit, check designated areas."
                    },
                    procedures: [
                        { heading: "Alarm Activation/Notification", details: "Upon hearing the fire alarm or receiving an evacuation instruction (e.g., from House Director, School Management, Emergency Services), all staff and students must immediately initiate evacuation." },
                        { heading: "Immediate Action", details: "Staff: Direct students to exit calmly and quickly via the nearest safe exit. Do not stop to collect personal belongings. Assist any students with mobility issues or special needs. Conduct a quick visual sweep of assigned areas (e.g., common rooms, corridors, bathrooms) to ensure no one is left behind, but do not re-enter a burning building. Students: Exit immediately and calmly. Follow staff instructions. Do not run or push." },
                        { heading: "Proceed to Assembly Point", details: "All individuals proceed directly to the designated assembly point for their house (clearly marked on evacuation plans). Walk, do not run." },
                        { heading: "Roll Call & Accountability", details: "House Director (or Senior Duty Staff) takes a physical roll call of all students present at the assembly point using the most up-to-date roll. Duty Staff report to the House Director on their sweep results and any missing individuals. Any unaccounted individuals are immediately reported to the Director of Boarding and/or emergency services." },
                        { heading: "Await Further Instructions", details: "Remain at the assembly point until an 'all clear' is given by the House Director, Director of Boarding, or Emergency Services. Do not re-enter the building until authorized." },
                        { heading: "Communication Protocols", details: "Internal: House Director immediately notifies Director of Boarding and School Management upon evacuation. External: Director of Boarding/School Management liaises with emergency services (111). Parents/caregivers will be informed via standard school communication channels once safety and accountability are confirmed." },
                        { heading: "Required Documentation/Record Keeping", details: "Evacuation Drill Log (date, time, duration, observations). Incident Report Form for any actual emergency evacuations. Updated student rolls (physical copy at assembly point and digital backup)." },
                        { heading: "Review Cycle", details: "Annual mandatory drills, and review of procedures after each drill or actual event." },
                        { heading: "Relevant Policy Cross-Reference", details: "Evacuation Policy, Hazards + Safety Policy." }
                    ]
                },
                "SOP 2.2: Missing Boarding Student Protocol": {
                    purpose: "To establish a rapid and systematic response protocol for any student discovered to be missing from the boarding house or school grounds when they should be present.",
                    scope: "All boarding staff, School Management, and Emergency Services.",
                    roles: {
                        "Duty Staff (Initial Responder)": "Initiates immediate checks, reports to House Director.",
                        "House Director": "Leads initial search, coordinates staff, notifies Director of Boarding, liaises with parents/caregivers.",
                        "Director of Boarding": "Notifies Campus Principal, Police (if necessary), coordinates wider school search, manages external communication.",
                        "School Management": "Supports search efforts, manages media (if applicable)."
                    },
                    procedures: [
                        { heading: "Initial Discovery (Duty Staff)", details: "Immediately upon discovering a student is missing from a required location (e.g., roll call, prep, lights out, designated area), the Duty Staff member conducts an immediate, thorough check of the student's room, common areas, and immediate house vicinity. Check if the student has signed out via REACH or has authorized leave. Attempt to contact the student via their mobile phone (if permitted)." },
                        { heading: "Notification to House Director", details: "If the student cannot be immediately located or accounted for within 5 minutes, the Duty Staff member immediately notifies the House Director." },
                        { heading: "House Director's Immediate Actions", details: "House Director takes charge. Confirms all initial checks have been made. Initiates a systematic search of the entire boarding house, including all rooms, bathrooms, common areas, and immediate outdoor areas around the house. Assigns specific staff members to search designated zones. Checks the student's recent activity (e.g., last known location, friends they were with). Reviews CCTV footage if available and relevant." },
                        { heading: "Notification to Director of Boarding", details: "If the student is not located within 15 minutes of the initial discovery, the House Director immediately notifies the Director of Boarding." },
                        { heading: "Director of Boarding's Actions", details: "Director of Boarding takes command of the search. Notifies the Campus Principal. Decides whether to involve Police immediately based on risk assessment (e.g., age of student, known vulnerabilities, suspicious circumstances, duration missing). Generally, Police should be contacted without undue delay if the student's safety is a concern. Coordinates a wider school search, involving additional staff if necessary (e.g., Security, other House Directors). Liaises with parents/caregivers, informing them of the situation and actions being taken. Maintain regular contact." },
                        { heading: "Notification to Police", details: "If the student remains missing, the Director of Boarding will contact the Police (111) to report them as a missing person. Provide the Police with a recent photograph, description of the student, and any other relevant information (e.g., last known clothes, circumstances of disappearance). The Director of Boarding will follow Police instructions and work with them in the search." },
                        { heading: "Communication to Parents/Caregivers", details: "Once the Police are involved, the House Director and Director of Boarding, in consultation with the Campus Principal, will continue to liaise with parents/caregivers, providing them with regular updates and support. The school will manage all external communication to media, if necessary, in coordination with the Police." },
                        { heading: "Required Documentation/Record Keeping", details: "Incident Report Form, including a detailed timeline of events. Records of all communications with staff, parents/caregivers, and external agencies (e.g., Police). Updated student roll." },
                        { heading: "Review Cycle", details: "After any missing student incident, the protocol will be reviewed and updated as necessary in a debriefing session with relevant staff." },
                        { heading: "Relevant Policy Cross-Reference", details: "Child and Young Person Protection Policy, Behaviour Management Policy." }
                    ]
                }
            },
            "III. Health & Well-being": {
                "SOP 3.1: Administration of Medication": {
                    purpose: "To ensure the safe and accurate administration of all prescribed and over-the-counter medication to boarding students.",
                    scope: "All boarding staff and students who require medication.",
                    roles: {
                        "Registered Nurse (School Health Centre)": "Dispenses and records all prescribed medication, provides training to staff on medication administration.",
                        "House Director/Duty Staff": "Administers medication as prescribed and records it, ensures secure storage.",
                        "Students": "Responsible for taking medication as directed and informing staff of any issues."
                    },
                    procedures: [
                        { heading: "Medication Storage", details: "All medication, including over-the-counter (OTC) pain relief, must be stored in a locked cabinet in the House Office. Students are not permitted to keep medication in their rooms unless it is an emergency medication like an EpiPen or asthma inhaler, which must be clearly labeled and logged with the House Director." },
                        { heading: "Medication Administration", details: "All medication must be administered by a designated Duty Staff member. The staff member must cross-reference the medication label, the student’s name, the dosage, and the time with the Medication Administration Record (MAR) chart before giving the medication. The staff member watches the student take the medication. The administration is then immediately recorded in the MAR chart, including the date, time, dosage, and staff initials." },
                        { heading: "Recording and Documentation", details: "All medication administration must be recorded on the MAR chart (or equivalent digital system like REACH). The record includes: Student’s name. Medication name and dosage. Time of administration. Staff member’s signature/initials. Any adverse reactions or refusal to take medication." },
                        { heading: "Parental Communication", details: "Parents/caregivers must be informed of any new medication or significant changes in a student’s medication schedule. Any refusal by a student to take essential medication must be reported to the House Director and parent/caregiver. Any adverse reactions are immediately reported to the School Health Centre and parents/caregivers." },
                        { heading: "Communication Protocols", details: "All communication regarding medication administration is handled by the House Director and the School Health Centre. Parents/caregivers are contacted promptly about medication changes or issues." },
                        { heading: "Required Documentation/Record Keeping", details: "Medication Administration Record (MAR) chart. Student Health Plan (if applicable). Parent/caregiver consent forms for medication." },
                        { heading: "Review Cycle", details: "Protocols are reviewed annually by the School Health Centre and Director of Boarding." },
                        { heading: "Relevant Policy Cross-Reference", details: "Health & Safety Policy, School Health Centre Protocols." }
                    ]
                }
            },
            "IV. Behaviour & Discipline": {
                "SOP 4.1: Behaviour Management & Disciplinary Action": {
                    purpose: "To provide a clear, fair, and consistent framework for managing student behaviour and applying disciplinary actions in the boarding community.",
                    scope: "All boarding staff and students.",
                    roles: {
                        "Duty Staff (Initial Responder)": "Addresses minor breaches, documents incidents, and reports to House Director.",
                        "House Director": "Manages and investigates incidents, applies appropriate disciplinary action, communicates with parents/caregivers.",
                        "Director of Boarding": "Manages serious incidents, oversees all disciplinary actions, liaises with Campus Principal.",
                        "Students": "Expected to understand and adhere to the behaviour expectations of the school and boarding community."
                    },
                    procedures: [
                        { heading: "Initial Response (Minor Incidents)", details: "For minor issues (e.g., untidy room, minor noise infractions), Duty Staff address the behaviour directly with the student, providing a verbal warning or a minor consequence (e.g., tidy up their area). The incident is logged in the Duty Report/Pastoral Note." },
                        { heading: "Escalation to House Director (Moderate Incidents)", details: "For repeated minor issues or moderate incidents (e.g., non-compliance with curfew, disrespectful behaviour), the Duty Staff member refers the matter to the House Director. The House Director investigates the incident, speaks with the student, and applies a consequence (e.g., loss of a privilege, an after-hours detention). The incident is recorded in REACH." },
                        { heading: "Serious Incidents & Disciplinary Committee", details: "For serious incidents (e.g., bullying, theft, substance use), the House Director immediately notifies the Director of Boarding and the Campus Principal. The Director of Boarding leads the investigation, which may involve the school’s Disciplinary Committee. Disciplinary actions for serious incidents are determined in consultation with school leadership and can include suspension, expulsion, or specific restorative justice outcomes. All actions and investigations are meticulously documented." },
                        { heading: "Parental Communication", details: "Parents/caregivers are informed promptly of all moderate and serious incidents and subsequent disciplinary actions. The House Director or Director of Boarding will communicate with parents to ensure they are aware of the situation and the steps being taken. For serious incidents, all communication is handled by the Director of Boarding." },
                        { heading: "Communication Protocols", details: "All communication is clear, consistent, and documented. Students are informed of the reasons for disciplinary action and the expected behaviour. Parents are kept in the loop." },
                        { heading: "Required Documentation/Record Keeping", details: "Incident reports in REACH, including a clear description of the incident, the investigation steps, and the outcome/consequence. Records of all communication with students, parents/caregivers, and other staff." },
                        { heading: "Review Cycle", details: "Protocols are reviewed annually or as needed. Disciplinary actions are reviewed to ensure fairness and consistency." },
                        { heading: "Relevant Policy Cross-Reference", details: "Anti-Bullying, Harassment and Discrimination Policy, Child and Young Person Protection Policy." }
                    ]
                }
            }
        };

        const pages = {
            '#home': () => renderHome(),
            '#sops': () => renderSOPs(),
            '#forms': () => renderForms(),
            'after-hours-contacts.html': () => fetchAndRenderContent('after-hours-contacts.html'),
            'suicide-protocol.html': () => fetchAndRenderContent('suicide-protocol.html')
        };

        const appContent = document.getElementById('app-content');
        let currentSOPContent = null;

        function loadContent(path) {
            // Remove previous content listeners
            if (currentSOPContent) {
                currentSOPContent.removeEventListener('click', handleSOPToggle);
            }

            const pageRenderer = pages[path] || pages['#home'];
            pageRenderer();
        }

        // Helper function to render a page from an external HTML file
        function fetchAndRenderContent(pageUrl) {
            fetch(pageUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.text();
                })
                .then(html => {
                    appContent.innerHTML = html;
                    // Re-attach listeners if needed, though for these pages it's not
                })
                .catch(error => {
                    console.error('Error fetching page:', error);
                    appContent.innerHTML = `<div class="p-8 text-center text-red-500">Error loading content. Please try again later.</div>`;
                });
        }

        function renderHome() {
            appContent.innerHTML = `
                <div class="p-8 bg-white rounded-lg shadow-xl text-center max-w-4xl mx-auto tile-bg-2">
                    <h2 class="text-3xl md:text-4xl font-bold text-white-stone mb-4">Welcome to the St. Peter's Boarding Community Hub</h2>
                    <p class="text-lg text-white-stone mb-6">Your go-to place for all Standard Operating Procedures, forms, and key contacts.</p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                        <a href="#sops" class="tile-bg-1 text-white p-6 rounded-lg shadow-md transition duration-300 hover:scale-105">
                            <h3 class="text-xl font-semibold mb-2">SOPs</h3>
                            <p>View all Standard Operating Procedures</p>
                        </a>
                        <a href="#forms" class="tile-bg-2 text-white-stone p-6 rounded-lg shadow-md transition duration-300 hover:scale-105">
                            <h3 class="text-xl font-semibold mb-2">Forms</h3>
                            <p>Access and download all essential forms</p>
                        </a>
                        <a href="after-hours-contacts.html" class="tile-bg-3 text-white-stone p-6 rounded-lg shadow-md transition duration-300 hover:scale-105">
                            <h3 class="text-xl font-semibold mb-2">Contacts</h3>
                            <p>Find key contact information</p>
                        </a>
                    </div>
                </div>
            `;
        }

        function renderSOPs() {
            let html = `
                <div class="bg-white p-8 rounded-lg shadow-xl max-w-5xl mx-auto">
                    <h2 class="text-3xl font-bold text-center text-midnight-blue mb-8">Standard Operating Procedures</h2>
            `;

            for (const category in sopsData) {
                html += `
                    <div class="mb-8">
                        <h3 class="text-2xl font-bold text-scarlet mb-4">${category}</h3>
                `;

                for (const sopName in sopsData[category]) {
                    html += `
                        <div class="sop-item">
                            <div class="sop-header p-4 cursor-pointer flex justify-between items-center bg-white-stone hover:bg-gray-100 transition-colors duration-200" data-sop-name="${sopName}" data-category-name="${category}">
                                <h4 class="text-xl font-semibold text-midnight-blue">${sopName}</h4>
                                <span class="toggle-icon text-midnight-blue transition-transform duration-200 transform">+</span>
                            </div>
                            <div class="sop-content p-4 bg-gray-50 border-t border-gray-200 hidden">
                                <!-- SOP details will be injected here by JavaScript -->
                            </div>
                        </div>
                    `;
                }

                html += `</div>`;
            }

            html += `</div>`;
            appContent.innerHTML = html;

            // Store the current SOP content element for later use
            currentSOPContent = appContent;
            // Attach event listener to the sop-item headers
            const sopHeaders = document.querySelectorAll('.sop-header');
            sopHeaders.forEach(header => header.addEventListener('click', handleSOPToggle));
        }

        function renderForms() {
            appContent.innerHTML = `
                <div class="bg-white p-8 rounded-lg shadow-xl max-w-5xl mx-auto">
                    <h2 class="text-3xl font-bold text-center text-midnight-blue mb-8">Essential Forms</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md hover-scale transition-transform duration-300">
                            <h3 class="text-xl font-semibold text-scarlet mb-2">Leave Request Form</h3>
                            <p class="text-warm-black mb-4">For students requesting leave from the boarding house.</p>
                            <a href="#" class="inline-block bg-saxe-blue text-white py-2 px-4 rounded-full text-sm font-bold hover:bg-midnight-blue transition-colors duration-300">Download PDF</a>
                        </div>
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md hover-scale transition-transform duration-300">
                            <h3 class="text-xl font-semibold text-scarlet mb-2">Medical Consent Form</h3>
                            <p class="text-warm-black mb-4">Required for all medical treatments and appointments.</p>
                            <a href="#" class="inline-block bg-saxe-blue text-white py-2 px-4 rounded-full text-sm font-bold hover:bg-midnight-blue transition-colors duration-300">Download PDF</a>
                        </div>
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md hover-scale transition-transform duration-300">
                            <h3 class="text-xl font-semibold text-scarlet mb-2">Weekend Sign-Out Form</h3>
                            <p class="text-warm-black mb-4">To be completed for all weekend sign-outs.</p>
                            <a href="#" class="inline-block bg-saxe-blue text-white py-2 px-4 rounded-full text-sm font-bold hover:bg-midnight-blue transition-colors duration-300">Download PDF</a>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function handleSOPToggle(event) {
            const header = event.currentTarget;
            const sopContent = header.nextElementSibling;
            const toggleIcon = header.querySelector('.toggle-icon');

            const sopName = header.dataset.sopName;
            const categoryName = header.dataset.categoryName;
            const sopDetails = sopsData[categoryName][sopName];

            // Close other open SOPs in the same category
            const parentCategory = header.closest('.mb-8');
            const otherSOPs = parentCategory.querySelectorAll('.sop-header.active');
            otherSOPs.forEach(otherHeader => {
                if (otherHeader !== header) {
                    otherHeader.classList.remove('active');
                    otherHeader.nextElementSibling.classList.add('hidden');
                    otherHeader.querySelector('.toggle-icon').textContent = '+';
                }
            });

            // Toggle the clicked SOP
            const isActive = header.classList.toggle('active');
            sopContent.classList.toggle('hidden');
            toggleIcon.textContent = isActive ? '-' : '+';

            // Only render content if the SOP is being opened
            if (isActive) {
                renderSOPDetails(sopContent, sopDetails);
            }
        }

        function renderSOPDetails(container, sopDetails) {
            let detailsHtml = `<p>${sopDetails.purpose}</p>`;

            // Roles section
            detailsHtml += `<div class="sop-detail-section"><h4>Roles & Responsibilities</h4><ul class="list-disc ml-6 mt-2">`;
            for (const role in sopDetails.roles) {
                detailsHtml += `<li><strong>${role}:</strong> ${sopDetails.roles[role]}</li>`;
            }
            detailsHtml += `</ul></div>`;

            // Procedures section
            detailsHtml += `<div class="sop-detail-section"><h4>Procedures</h4>`;
            sopDetails.procedures.forEach(procedure => {
                detailsHtml += `<h5>${procedure.heading}</h5>`;

                // Split the details string into sentences
                const sentences = procedure.details.split('. ').filter(sentence => sentence.trim() !== '');

                // Create a bulleted list from the sentences
                detailsHtml += `<ul class="list-disc ml-6">`;
                sentences.forEach(sentence => {
                    detailsHtml += `<li>${sentence.trim()}.</li>`;
                });
                detailsHtml += `</ul>`;

            });
            detailsHtml += `</div>`;

            container.innerHTML = detailsHtml;
        }

        // Add a click listener for all nav links to handle SPA routing
        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', handleNavLinkClick);
        });

        function handleNavLinkClick(event) {
            event.preventDefault(); // Prevent default link behaviour
            const path = this.getAttribute('href'); // Use 'path' as it can be a hash or a file name
            loadContent(path);
            // Update URL hash for direct linking/back button support
            if (path.startsWith('#')) {
                window.location.hash = path;
            } else {
                // For external HTML files, we can't change the hash to reflect the external file
                // without actually navigating, which we are preventing.
                // A more advanced router would handle this, but for now, we just load the content.
            }
        }

        // Initial load of content and attachment of listeners
        document.addEventListener('DOMContentLoaded', () => {
            // Check if there's an initial hash or if it's a direct load of the index.html
            // If the URL ends with 'after-hours-contacts.html', load that content directly.
            const currentPath = window.location.pathname.split('/').pop();
            if (currentPath === 'after-hours-contacts.html') {
                loadContent('after-hours-contacts.html');
            } else if (currentPath === 'suicide-protocol.html') {
                loadContent('suicide-protocol.html');
            } else if (window.location.hash) {
                loadContent(window.location.hash);
            } else {
                renderHome();
            }
        });
    </script>
</body>
</html>
